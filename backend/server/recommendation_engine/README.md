## Books Recommendation System
___
### Content - Based filtering

A content-based recommender works with data that the user provides, either _explicitly_ (rating, adding to wishlist) or _implicitly_ (clicking on a link). Based on that data, a user profile is generated, which is then used to make suggestions to the user. As the user provides more inputs or takes actions on those recommendations, the engine becomes more and more accurate.
A recommender system has to decide between two methods for information delivery when providing the user with recommendations:
- Exploitation. The system chooses books similar to those for which the user has already expressed a preference.
- Exploration. The system chooses books where the user profile does not provide evidence to predict the user’s reaction.
To personalise our recommendations, I am going to build an engine that computes similarity between books based on certain metrics and suggests books that are most similar to a particular book that a user read/added to wishlist. Since we will be using book's metadata to build this engine.
  
#### tf-idf
  
The **tf-idf** algorithm is used to weight a keyword in any genre's tag and assign the importance to that keyword based on the number of times it appears in the tags. Put simply, the higher the **tf-idf** score (weight), the rarer and more important the term, and vice versa.  
  
The TF (term frequency) of a word is the number of times it appears in a books's genre. When you know it, you’re able to see if you’re using a term too often or too infrequently.
```python
TF(t) = (Number of times term t appears in a document) / (Total number of terms in the document)
```

The IDF (inverse document frequency) of a word is the measure of how significant that genre is in the whole corpus.

```python
IDF(t) = log_e(Total number of documents / Number of documents with term t in it)
```

#### Cosine Similarity

I will be using the Cosine Similarity to calculate a numeric quantity that denotes the similarity between two movies. Mathematically, it is defined as follows:

![](data:image/png;base64,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)
  
Since we have used the TF-IDF Vectorizer, calculating the Dot Product will directly give us the Cosine Similarity Score. Therefore, we will use sklearn's linear_kernel instead of cosine_similarities since it is much faster.

### Usage

Firstly, you need to run in console ```refresh_recommendations.py``` file to populate ```users_recommendations``` table.

```python
python refresh_recommendations -hst <localhost> -u <username> -p <password> -db  <database_name> 
```

Create a new RecommendationEngine object.

```python
rec_engine = RecommendationEngine()
```

To get recommendations you need to run the following steps:

```python
rec_enginde.connect_to_db('db_name', 'username', 'password', 'localhost')
book_titles_ids = rec_engine.get_recommendations(1)
rec_engine.close_db_connection()
```

